<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="glue">
<title>glue custom knitr language engines â€¢ glue</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Source%20Sans%20Pro-0.4.0/font.css" rel="stylesheet">
<link href="../deps/_Source%20Code%20Pro-0.4.0/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="glue custom knitr language engines">
<meta property="og:description" content="glue">
<meta property="og:image" content="https://glue.tidyverse.org/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script><script defer data-domain="glue.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">glue</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.5.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/engines.html">glue custom knitr language engines</a>
    <a class="dropdown-item" href="../articles/releases/glue-1.2.0.html">glue 1.2.0</a>
    <a class="dropdown-item" href="../articles/speed.html">Speed of glue</a>
    <a class="dropdown-item" href="../articles/transformers.html">Transformers</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <a class="dropdown-item" href="../articles/releases/glue-1.2.0.html">Version 1.2.0</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tidyverse/glue/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article" id="container">
<script src="engines_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>glue custom knitr language engines</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/glue/blob/HEAD/vignettes/engines.Rmd" class="external-link"><code>vignettes/engines.Rmd</code></a></small>
      <div class="d-none name"><code>engines.Rmd</code></div>
    </div>

    
    
<p>Glue provides a few <a href="https://bookdown.org/yihui/rmarkdown-cookbook/custom-engine.html#custom-engine" class="external-link">custom language engines</a> for knir, which allows you to use glue directly in knitr chunks.</p>
<div class="section level2">
<h2 id="glue-engine">
<code>glue</code> engine<a class="anchor" aria-label="anchor" href="#glue-engine"></a>
</h2>
<p>The first engine is the <code>glue</code> engine, which evaluates the chunk contents as a glue template.</p>
<pre class="glue"><code><span class="fl">1</span> <span class="op">+</span> <span class="fl">1</span> <span class="op">=</span> <span class="op">{</span><span class="fl">1</span> <span class="op">+</span> <span class="fl">1</span><span class="op">}</span></code></pre>
<pre><code><span class="co">## 1 + 1 = 2</span></code></pre>
<p>Maybe the most useful use of the <code>glue</code> engine is to set the knitr option <code>results = 'asis'</code> and output markdown or HTML directly into the document.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb3-1"><a href="#cb3-1"></a><span class="bn">```{glue, results = 'asis', echo = FALSE}</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="bn">#### mtcars has **{nrow(mtcars)} rows** and _{ncol(mtcars)} columns_.</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="bn">```</span></span></code></pre></div>
<div class="section level4">
<h4 id="mtcars-has-32-rows-and-11-columns-">mtcars has <strong>32 rows</strong> and <em>11 columns</em>.<a class="anchor" aria-label="anchor" href="#mtcars-has-32-rows-and-11-columns-"></a>
</h4>
<p>If you want to pass additional arguments into the glue call, simply include them as chunk options.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb4-1"><a href="#cb4-1"></a><span class="bn">```{glue, .open = "&lt;&lt;", .close = "&gt;&gt;", results = 'asis', echo = FALSE}</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="bn">The **median waiting time** between eruptions is &lt;&lt;median(faithful$waiting)&gt;&gt;.</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="bn">```</span></span></code></pre></div>
<p>The <strong>median waiting time</strong> between eruptions is 76.</p>
</div>
</div>
<div class="section level2">
<h2 id="glue_sql-engine">
<code>glue_sql</code> engine<a class="anchor" aria-label="anchor" href="#glue_sql-engine"></a>
</h2>
<p>The second engine is <code>glue_sql</code>, which will use <code><a href="../reference/glue_sql.html">glue::glue_sql()</a></code> to generate a SQL query and then run the query using the <a href="https://bookdown.org/yihui/rmarkdown/language-engines.html#sql" class="external-link">sql engine</a>.</p>
<p>First we create a new connection to an in-memory SQLite database, and write a new table to it.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">RSQLite</span><span class="fu">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html" class="external-link">SQLite</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">":memory:"</span><span class="op">)</span>
<span class="va">mtcars</span><span class="op">$</span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span>
<span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"mtcars"</span>, <span class="va">mtcars</span><span class="op">)</span></code></pre></div>
<p>Next define some variables we that we can use with glue to interpolate.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">var</span> <span class="op">&lt;-</span> <span class="st">"mpg"</span>
<span class="va">tbl</span> <span class="op">&lt;-</span> <span class="st">"mtcars"</span>
<span class="va">num</span> <span class="op">&lt;-</span> <span class="fl">150</span></code></pre></div>
<p>Then we can use <code>glue_sql</code> to construct and run a query using those variables into that database. <em>Note</em> you need to provide the connection object as a <code>connection</code> chunk option.</p>
<p>In this example there are two type of quotes. The first is a bare backtick, these are passed directly to the SQL engine unchanged. The second is backticks inside of braces, which are specially interpreted to do the proper quoting for the given SQL engine by glue. In this example we use the <code>sqlite</code> engine, which uses backticks for quoting, but you would use the same backticks inside brace syntax for postgreSQL, and <code><a href="../reference/glue_sql.html">glue_sql()</a></code> would automatically use double quotes for quoting instead.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1"></a><span class="bn">```{glue_sql, connection = con}</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="bn">SELECT `model`, `hp`, {`var`}</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="bn">FROM {`tbl`}</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="bn">WHERE {`tbl`}.hp &gt; {num}</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="bn">```</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">SELECT</span> `model`, `hp`, `mpg`</span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="kw">FROM</span> `mtcars`</span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="kw">WHERE</span> `mtcars`.hp <span class="op">&gt;</span> <span class="dv">150</span></span></code></pre></div>
<div class="knitsql-table">
<table class="table">
<caption>Displaying records 1 - 10</caption>
<thead><tr class="header">
<th align="left">model</th>
<th align="right">hp</th>
<th align="right">mpg</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Hornet Sportabout</td>
<td align="right">175</td>
<td align="right">18.7</td>
</tr>
<tr class="even">
<td align="left">Duster 360</td>
<td align="right">245</td>
<td align="right">14.3</td>
</tr>
<tr class="odd">
<td align="left">Merc 450SE</td>
<td align="right">180</td>
<td align="right">16.4</td>
</tr>
<tr class="even">
<td align="left">Merc 450SL</td>
<td align="right">180</td>
<td align="right">17.3</td>
</tr>
<tr class="odd">
<td align="left">Merc 450SLC</td>
<td align="right">180</td>
<td align="right">15.2</td>
</tr>
<tr class="even">
<td align="left">Cadillac Fleetwood</td>
<td align="right">205</td>
<td align="right">10.4</td>
</tr>
<tr class="odd">
<td align="left">Lincoln Continental</td>
<td align="right">215</td>
<td align="right">10.4</td>
</tr>
<tr class="even">
<td align="left">Chrysler Imperial</td>
<td align="right">230</td>
<td align="right">14.7</td>
</tr>
<tr class="odd">
<td align="left">Camaro Z28</td>
<td align="right">245</td>
<td align="right">13.3</td>
</tr>
<tr class="even">
<td align="left">Pontiac Firebird</td>
<td align="right">175</td>
<td align="right">19.2</td>
</tr>
</tbody>
</table>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://www.jimhester.com/" class="external-link">Jim Hester</a>, <a href="https://jennybryan.org" class="external-link">Jennifer Bryan</a>, <a href="https://www.rstudio.com" class="external-link"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" width="72"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

  </div></footer>
</body>
</html>
